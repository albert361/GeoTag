<html>
<head>
<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
<meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
<title>GeoTag Picture Location Map</title>
<script type="text/javascript"
	src="http://maps.google.com/maps/api/js?sensor=false"></script>
<script type="text/javascript">
    var map;
    var locn;
    var marker;

    function newMapCenteredAtLatLon(latitude, longitude) {
	locn = new google.maps.LatLng(latitude, longitude);
	var mapOptions = {
	    zoom: 9,
	    center: locn,
	    mapTypeId: google.maps.MapTypeId.ROADMAP
	}
	map = new google.maps.Map(document.getElementById("map_canvas"),
				  mapOptions);
				  
	var markerOpts = {
	    position: locn,
	    map: map,
	    visible: 0
	}
	marker = new google.maps.Marker(markerOpts);
	google.maps.event.addListener(map, 'click', function(event) {
				      moveMarkerOnClick(event.latLng);
				      });
     }
    
    function addMarkerToMapAt(latitude, longitude, title) {
	locn = new google.maps.LatLng(latitude, longitude);
	map.set_center(locn);
	map.set_zoom(15);
	marker.set_position(locn);
	marker.set_title(title);
	marker.set_visible(1);
    }

    function moveMarkerOnClick(location) {
	marker.set_position(location);
	if (controller) {
	    controller.webLat = "" + location.lat();
	    controller.webLng = "" + location.lng();
	    controller.report();
	}
	marker.set_visible(1);
    }

    function initialize() {
	newMapCenteredAtLatLon(37.512994, -122.33963);
    }
</script>
</head>
<body style="margin:0px; padding:0px;" onload="initialize()">
  <div id="map_canvas" style="width:100%; height:100%"></div>
</body>
</html>